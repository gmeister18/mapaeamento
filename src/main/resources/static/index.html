<html lang="pt-BR" class="w-mod-js w-mod-ix w-mod-js">
<link rel="preload" href="https://www.paulooctavio.com.br/assets1/font-awesome/webfonts/fa-regular-400.woff2" as="font"
  crossorigin="anonymous" />
<link rel="dns-prefetch" href="https://www.googletagmanager.com" />

<link rel="stylesheet" href="https://www.paulooctavio.com.br/javax.faces.resource/css/website.min.css.jsf?ln=default"
  media="screen and (min-width: 576px)" />
<link rel="shortcut icon" href="https://www.paulooctavio.com.br/javax.faces.resource/img/favicon.ico.jsf?ln=default" />

<nav id="main-navbar" class="navbar navbar-expand-xl navbar-light bg-light fixed-top">
  <div class="container-xl">
    <a class="navbar-brand" href="/" previewlistener="true"><img
        src="https://www.paulooctavio.com.br/javax.faces.resource/img/paulooctavio-logo.webp.jsf?ln=default"
        alt="PaulOOctavio" height="50px" width="140px" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu"
      aria-controls="main-menu" aria-expanded="false" aria-label="Alterna menu principal">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>

<div id="content">
  <div class="cmp-box-bsb-before"></div>
  <div class="container-fluid bg-light-20 app-box-bsb app-contato-topo">
    <div class="container">
      <div class="row">
        <img src="https://www.paulooctavio.com.br/javax.faces.resource/img/arte-brasilia.webp.jsf?ln=default"
          alt="Imagem topo" class="img-fluid app-box-bsb-image" />
      </div>
      <div class="container app-box-bsb-content">
        <div class="row">
          <h1 style="margin-bottom: 80px;" class="w-100 text-uppercase app-title text-center">
            LISTAGEM DE OBRAS
          </h1>
          <div class="col-12">
            <div class="form-group">
              <label for="exampleInputEmail1">Pesquisar</label>
              <input type="text" class="form-control" placeholder="Local ou Nº Série"
                onkeyup="filterData(event.target.value);" </div>
            </div>
            <div class="row" id="row-cards">
             

            </div>
            <!-- <div class="text-center cmp-paginacao-container">

              <a id="form-pesquisa:j_idt95:0:j_idt96" href="listaobras.html"
                onclick="mojarra.ab(this,event,'action','@form','@form');return false"
                class="mr-1 btn btn-outline-primary active ">1</a>

              <a id="form-pesquisa:j_idt95:1:j_idt96" href="listaobras2.html"
                onclick="mojarra.ab(this,event,'action','@form','@form');return false"
                class="mr-1 btn btn-outline-dark">2</a>

              <a id="form-pesquisa:j_idt95:2:j_idt96" href="listaobras3.hmtl"
                onclick="mojarra.ab(this,event,'action','@form','@form');return false"
                class="mr-1 btn btn-outline-dark">3</a>

              <a id="form-pesquisa:j_idt95:2:j_idt96" href="listaobras4.hmtl"
                onclick="mojarra.ab(this,event,'action','@form','@form');return false"
                class="mr-1 btn btn-outline-dark">4</a>
              <a id="form-pesquisa:j_idt95:2:j_idt96" href="listaobras5.hmtl"
                onclick="mojarra.ab(this,event,'action','@form','@form');return false"
                class="mr-1 btn btn-outline-dark">5</a>



            </div> -->
          </div>

          <div class="d-flex justify-content-left" { display: flex; /* Ativa o Flexbox */ justify-content: center; /*
            Centraliza horizontalmente */ align-items: center; /* Centraliza verticalmente */}>
            <a href="./inicio.html" class="btn btn-sm pl-5 pr-5 btn-dark" previewlistener="true">VOLTAR</a>
          </div>



          <script>

            var rowCards = document.getElementById("row-cards");
            var elements = "";
            var data = {};

            async function getData() {
              const response = await fetch("http://127.0.0.1:8080/funcionarios");
              data = await response.json();
              printJSON(data);
            }


            async function printJSON(json) {
              elements = "";

              var count = Object.keys(json).length
              alert(count)

              for (let index = 0; index < count; index++) {
                var relogio = json[index]["Relógio"];
                var serie = json[index]["Nº serie"];
                var link = json[index]["Link Control ID"];

                elements += ` <div class="col-10 offset-1 col-md-6 offset-md-3 col-xl-3 offset-xl-0">
                <div class="app-card-especial" style="">
                  <div style="background-image: url('http://127.0.0.1:8080/funcionarios/image/${json[index]["id"]}'); background-size: cover; background-position: center; height: 200px; border-radius: 10px;"></div>
                  <span style=" font-size: 1.2rem; margin-bottom: 20px; text-align: center;"
                  class="d-block text-center app-title"> <strong>Local:</strong> ${relogio}<br> 
                  <strong>Nº série:</strong> ${serie} </span>
                  <div class="d-flex justify-content-center align-items-center" { display: flex; /* Ativa o Flexbox */
                  justify-content: center; /* Centraliza horizontalmente */ align-items: center; /* Centraliza
                  verticalmente */}>
                  <a href="${link}" class="btn btn-lg pl-5 pr-5 btn-primary btn-block" target="_blank" 
                  previewlistener="true">ACESSE</a>
                  </div>
                  </div>
                  </div>`;

              }

              rowCards.innerHTML = elements;

            }

            getData();

            function filterData(search) {
              search = search.toLowerCase();
              
              //se pesquisa for vazia listar dados brutos/lista completa
              if (search == undefined || search == null || search.length == 0) {
                printJSON(data);
                return;
              }

              var filteredData = data.filter(d => d["Relógio"].toLowerCase().includes(search) || d["Nº serie"].toLowerCase().includes(search));
              console.log(filteredData)
              printJSON(filteredData);
            }




          </script>

</html>